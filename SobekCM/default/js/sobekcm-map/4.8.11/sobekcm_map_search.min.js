function show_map_instructions(){var n=document.getElementById("MapInstructions");return n.style.display="block",n=document.getElementById("MapInstructionsLink"),n.style.display="none",!1}function address_keydown(n,t){var i=!1;if(document.all?n.keyCode==13&&(i=!0):document.getElementById?n.which==13&&(i=!0):document.layers&&n.which==13&&(i=!0),i)return map_address_geocode(),!1;address_box_changed(t)}function address_box_changed(n){var t;n.value==""||n.value==n.defaultValue?(t=document.getElementById("findButton"),t!=null&&(t.disabled=!0)):(t=document.getElementById("findButton"),t!=null&&(t.disabled=!1))}function show_coordinates(){var t=document.getElementById("map_coordinates_div"),n;return t.style.display="",n=document.getElementById("coordinate_text_span"),n.innerHTML="Alternatively, you can search by latitude/longitude.",!1}function load_map(n,t,i,r){var u=new google.maps.LatLng(n,t),f={zoom:i,center:u,mapTypeId:google.maps.MapTypeId.HYBRID,streetViewControl:!1};sobekcm_map=new SobekCM.Map(r,f);bounds=new google.maps.LatLngBounds;selected_bounds=new google.maps.LatLngBounds}function load_search_map(n,t,i,r){var f=new google.maps.LatLng(n,t),e={zoom:i,center:f,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:!1},u;sobekcm_map=new SobekCM.Map(r,e);sobekcm_map.OnNewSelection=function(n){var t=document.getElementById("Textbox1"),i=document.getElementById("Textbox2"),r=document.getElementById("Textbox3"),u=document.getElementById("Textbox4"),f;n.length==2&&(t.value=n[0],i.value=n[1],r.value="",u.value="");n.length==4&&(t.value=n[0],i.value=n[1],r.value=n[2],u.value=n[3]);f=document.getElementById("searchButton");f.disabled=!1};sobekcm_map.OnNewSelectionStarted=function(){var i=document.getElementById("Textbox1"),r=document.getElementById("Textbox2"),u=document.getElementById("Textbox3"),f=document.getElementById("Textbox4"),t,n;i.value="";r.value="";u.value="";f.value="";t=document.getElementById("AddressTextBox");t!=null&&(t.value="");n=document.getElementById("searchButton");n.disabled=!0;n=document.getElementById("findButton");n!=null&&(n.disabled=!0)};sobekcm_map.setMapTool(SobekCM_MapTool_Type_Enum.standard);u=document.getElementById("searchButton");u.disabled=!0;u=document.getElementById("findButton");u!=null&&(u.disabled=!0);bounds=new google.maps.LatLngBounds}function disable_point_searching(){sobekcm_map.disable_point_search()}function add_key(n,t,i,r){sobekcm_map.addMapKey(n,t,i,r)}function add_selection_point(n,t,i){var r=new google.maps.LatLng(n,t);sobekcm_map.set_selection_point(r,!0,!0,i)}function add_selection_rectangle(n,t,i,r){var u=new google.maps.LatLng(n,t),f=new google.maps.LatLng(i,r);sobekcm_map.set_selection_rectangle(u,f,!0,!1);bounds.extend(u);bounds.extend(f)}function zoom_to_bounds(){return sobekcm_map.zoom_to_bounds(bounds),!1}function zoom_to_selected(){return sobekcm_map.zoom_to_bounds(selected_bounds),!1}function add_point(n,t,i){var r=new google.maps.LatLng(n,t);bounds.extend(r);sobekcm_map.add_point(r,i)}function add_polygon(n,t,i,r){for(var u=0;u<n.length;)bounds.extend(n[u]),t&&selected_bounds.extend(n[u]),u++;t?sobekcm_map.add_polygon(n,"#22bb22","#33cc00",4,i,r):sobekcm_map.add_polygon(n,"#3333FF","#3333FF",0,i,r)}function add_rectangle(n,t,i,r){sobekcm_map.add_rectangle(n,t,i,r,"#cc3333")}function map_search_sobekcm(n){var t=trimString(document.search_form.Textbox1.value)+","+trimString(document.search_form.Textbox2.value)+","+trimString(document.search_form.Textbox3.value)+","+trimString(document.search_form.Textbox4.value),i;t.length>0&&(i=n+"?coord="+t,n.indexOf("?")>0&&(i=n+"&coord="+t),window.location.href=i)}function map_item_search_sobekcm(n){var t=trimString(document.itemNavForm.Textbox1.value)+","+trimString(document.itemNavForm.Textbox2.value)+","+trimString(document.itemNavForm.Textbox3.value)+","+trimString(document.itemNavForm.Textbox4.value),i;t.length>0&&(i=n+"&coord="+t,window.location.href=i)}function map_address_geocode(){var t=document.getElementById("AddressTextBox"),i=t.value,n=new google.maps.Geocoder;n&&n.geocode({address:i},function(n,t){t==google.maps.GeocoderStatus.OK?sobekcm_map.set_selection_point(n[0].geometry.location,!0,!0,15):alert("Geocode was not successful for the following reason: "+t)})}function locate_by_coordinates(){var n=parseFloat(document.search_form.Textbox1.value),t=parseFloat(document.search_form.Textbox2.value),i=parseFloat(document.search_form.Textbox3.value),r=parseFloat(document.search_form.Textbox4.value);isNaN(n)||isNaN(t)||(isNaN(i)||isNaN(r)?(document.search_form.Textbox3.value="",document.search_form.Textbox4.value="",add_selection_point(n,t,15)):(add_selection_rectangle(n,t,i,r),zoom_to_bounds()))}function trimString(n){return n=this!=window?this:n,n.replace(/^\s+/g,"").replace(/\s+$/g,"")}var sobekcm_map,bounds,selected_bounds