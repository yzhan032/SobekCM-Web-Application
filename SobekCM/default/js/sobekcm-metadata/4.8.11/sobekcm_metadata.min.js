function MyHash(){this.length=0;this.items=[];for(var n=0;n<arguments.length;n+=2)typeof arguments[n+1]!="undefined"&&(this.items[arguments[n]]=arguments[n+1],this.length++);this.removeItem=function(n){var t;return typeof this.items[n]!="undefined"&&(this.length--,t=this.items[n],delete this.items[n]),t};this.getItem=function(n){return this.items[n]};this.setItem=function(n,t){var i;return typeof t!="undefined"&&(typeof this.items[n]=="undefined"?this.length++:i=this.items[n],this.items[n]=t),i};this.hasItem=function(n){return typeof this.items[n]!="undefined"};this.clear=function(){for(var n in this.items)delete this.items[n];this.length=0}}function addvolume_save_form(n){var t=document.getElementById("action");return t.value="save"+n,document.itemNavForm.submit(),!1}function addvolume_cancel_form(){var n=document.getElementById("action");return n.value="cancel",document.itemNavForm.submit(),!1}function behaviors_cancel_form(){var n=document.getElementById("behaviors_request");return n.value="cancel",document.itemNavForm.submit(),!1}function behaviors_save_form(){var n=document.getElementById("behaviors_request");return n.value="save",document.itemNavForm.submit(),!1}function template_changed(){var i=document.getElementById("action"),n,t;return i.value="template",n=document.getElementById("phase"),t=document.getElementById("prefTemplate"),n.value=t.value,document.itemNavForm.submit(),!1}function project_changed(){var i=document.getElementById("action"),n,t;return i.value="project",n=document.getElementById("phase"),t=document.getElementById("prefProject"),n.value=t.value,document.itemNavForm.submit(),!1}function file_delete(n){var i=document.getElementById("action"),t;return i.value="delete",t=document.getElementById("phase"),t.value=n,document.itemNavForm.submit(),!1}function new_item_cancel(){var n=document.getElementById("action");return n.value="cancel",document.itemNavForm.submit(),!1}function new_item_clear(){var n=document.getElementById("action");return n.value="clear",document.itemNavForm.submit(),!1}function new_item_next_phase(n){var i=document.getElementById("action"),t;return i.value="next_phase",t=document.getElementById("phase"),t.value=n,document.itemNavForm.submit(),!1}function new_upload_next_phase(n){var i=document.getElementById("action"),t;return i.value="next_phase",t=document.getElementById("phase"),t.value=n,document.itemNavForm.submit(),!1}function clear_textbox(n){var t=document.getElementById(n);return t!=null&&(t.value=""),!1}function combo_text_element_onchange(n,t,i){var u=document.getElementById(n),f=document.getElementById(t),r;if(u!=null&&f!=null){if(r=u.value,r.indexOf("|")>0)return f.value=r.substring(r.indexOf("|")),!1;i&&(thisBox.value="")}else alert("something was null");return!1}function add_new_element_adv(n,t){var r=n.replace("_",""),u=document.getElementById(n+"_div"),f=document.createElement("br"),i;return u.appendChild(f),i=document.createElement("input"),i.name=r+"new"+new_element_index,i.type="text",i.id=r+"new"+new_element_index,i.className=t+"_input sbk_Focusable",u.appendChild(i),new_element_index++,!1}function add_new_element(n){var i=n.replace("_",""),r=document.getElementById(n+"_div"),u=document.createElement("br"),t;return r.appendChild(u),t=document.createElement("input"),t.name=i+"new"+new_element_index,t.type="text",t.id=i+"new"+new_element_index,t.className=n+"_input sbk_Focusable",r.appendChild(t),new_element_index++,!1}function add_new_multi_element(n,t,i,r){var f,e,o,h,u,s;return(item_count_hash.hasItem(n)||item_count_hash.setItem(n,t),i>0&&item_count_hash.getItem(n)>=i)?!1:(f=item_count_hash.getItem(n)+1,item_count_hash.setItem(n,f),e=n.replace("_",""),o=document.getElementById(n+"_div"),r>0&&item_count_hash.getItem(n)%r==1&&(h=document.createElement("br"),o.appendChild(h)),u=document.createElement("input"),u.name=e+"new"+f,u.type="text",u.id=e+"new"+f,u.className=n+"_input sbk_Focusable",o.appendChild(u),i>0&&f>=i&&(s=document.getElementById(n+"_repeaticon"),s!=null&&(s.style.display="none")),!1)}function add_new_multi_combo_element(n,t,i,r){var f,e,h,l,u,o,s,a,c;if(item_count_hash.hasItem(n)||item_count_hash.setItem(n,t),i>0&&item_count_hash.getItem(n)>=i)return!1;if(f=item_count_hash.getItem(n)+1,item_count_hash.setItem(n,f),e=n.replace("_",""),h=document.getElementById(n+"_div"),r>0&&item_count_hash.getItem(n)%r==1&&(l=document.createElement("br"),h.appendChild(l)),u=document.createElement("select"),u.name=e+"new"+f,u.id=e+"new"+f,u.className=n+"_input",h.appendChild(u),o=document.getElementById(e+"1"),o!=null)for(s=0;s<o.length;s++)a=o[s].cloneNode(!0),u.appendChild(a);return i>0&&f>=i&&(c=document.getElementById(n+"_repeaticon"),c!=null&&(c.style.display="none")),!1}function add_two_text_box_element(n,t,i){var e=n.replace("_",""),f=document.getElementById(n+"_div"),h=document.createElement("br"),o,r,s,u;return f.appendChild(h),t.length>0&&(o=document.createElement("span"),o.className="metadata_sublabel2",o.innerHTML=t+":",f.appendChild(o)),r=document.createElement("input"),r.name=e+"_firstnew"+new_element_index,r.type="text",r.id=e+"_firstnew"+new_element_index,r.className=n+"_first_input sbk_Focusable",f.appendChild(r),i.length>0&&(s=document.createElement("span"),s.className="metadata_sublabel",s.innerHTML=i+":",f.appendChild(s)),u=document.createElement("input"),u.name=e+"_secondnew"+new_element_index,u.type="text",u.id=e+"_secondnew"+new_element_index,u.className=n+"_second_input sbk_Focusable",f.appendChild(u),new_element_index++,!1}function container_add_new_item(){var i=document.getElementById("container_div"),o=document.createElement("br"),n,r,u,e,f,t;if(i.appendChild(o),n=document.createElement("select"),n.name="container_selectnew"+new_element_index,n.id="container_selectnew"+new_element_index,n.className="container_select",i.appendChild(n),r=document.getElementById("container_select1"),r!=null)for(u=0;u<r.length;u++)e=r[u].cloneNode(!0),n.appendChild(e);return f=document.createElement("span"),f.className="metadata_sublabel",f.innerHTML="Label:",i.appendChild(f),t=document.createElement("input"),t.name="container_textnew"+new_element_index,t.type="text",t.id="container_textnew"+new_element_index,t.className="container_input sbk_Focusable",i.appendChild(t),new_element_index++,!1}function add_text_box_select_element(n,t){var u=n.replace("_",""),f=document.getElementById(n+"_div"),c=document.createElement("br"),i,e,r,o,s,h;if(f.appendChild(c),i=document.createElement("input"),i.name=u+"_textnew"+other_title_new_index,i.type="text",i.id=u+"_textnew"+other_title_new_index,i.className=n+"_input sbk_Focusable",f.appendChild(i),t.length>0&&(e=document.createElement("span"),e.className="metadata_sublabel",e.innerHTML=" "+t+": ",f.appendChild(e)),r=document.createElement("select"),r.name=u+"_selectnew"+other_title_new_index,r.id=u+"_selectnew"+other_title_new_index,r.className=n+"_select",f.appendChild(r),o=document.getElementById(u+"_select1"),o!=null)for(s=0;s<o.length;s++)h=o[s].cloneNode(!0),r.appendChild(h);return other_title_new_index++,!1}function download_add_new_item(){var r="download",i=r.replace("_",""),u=document.getElementById(r+"_div"),h=document.createElement("br"),n,f,e,s,o,t;if(u.appendChild(h),n=document.createElement("select"),n.name=i+"_selectnew"+new_element_index,n.id=i+"_selectnew"+new_element_index,n.className=r+"_select",u.appendChild(n),f=document.getElementById(i+"_select1"),f!=null)for(e=0;e<f.length;e++)s=f[e].cloneNode(!0),n.appendChild(s);return n.value="",o=document.createElement("span"),o.className="metadata_sublabel",o.innerHTML="Label: ",u.appendChild(o),t=document.createElement("input"),t.name=i+"_textnew"+new_element_index,t.type="text",t.id=i+"_textnew"+new_element_index,t.className=r+"_input sbk_Focusable",u.appendChild(t),new_element_index++,!1}function add_publisher_element(n){var t=n.replace("_",""),i=document.getElementById(n+"_div"),h=document.createElement("br"),o,r,s,u,f,e;return i.appendChild(h),o=document.createElement("span"),o.className="metadata_sublabel2",o.innerHTML="Name:",i.appendChild(o),r=document.createElement("input"),r.name=t+"_namenew"+new_element_index,r.type="text",r.id=t+"_namenew"+new_element_index,r.className=n+"_name_input sbk_Focusable",i.appendChild(r),h=document.createElement("br"),i.appendChild(h),s=document.createElement("span"),s.className="metadata_sublabel2",s.innerHTML="Location(s):",i.appendChild(s),u=document.createElement("input"),u.name=t+"_firstlocnew"+new_element_index,u.type="text",u.id=t+"_firstlocnew"+new_element_index,u.className=n+"_location_input sbk_Focusable",i.appendChild(u),f=document.createElement("input"),f.name=t+"_secondlocnew"+new_element_index,f.type="text",f.id=t+"_secondlocnew"+new_element_index,f.className=n+"_location_input sbk_Focusable",i.appendChild(f),e=document.createElement("input"),e.name=t+"_thirdlocnew"+new_element_index,e.type="text",e.id=t+"_thirdlocnew"+new_element_index,e.className=n+"_location_input sbk_Focusable",i.appendChild(e),new_element_index++,!1}function abstract_add_new_item(n){var i=document.getElementById("abstract_div"),r=document.createElement("br"),t;return i.appendChild(r),t=document.createElement("textarea"),t.name="abstractnew"+abstract_new_index,t.id="abstractnew"+abstract_new_index,t.className="abstract_input sbk_Focusable",t.setAttribute("rows","3"),t.setAttribute("cols",n),i.appendChild(t),abstract_new_index++,!1}function note_add_new_item(n){var i=document.getElementById("note_div"),r=document.createElement("br"),t;return i.appendChild(r),t=document.createElement("textarea"),t.name="notenew"+note_new_index,t.id="notenew"+note_new_index,t.className="note_input sbk_Focusable",t.setAttribute("rows","3"),t.setAttribute("cols",n),i.appendChild(t),note_new_index++,!1}function add_temporal_element(){var f="complex_temporal",t=f.replace("_",""),n=document.getElementById("complex_temporal_div"),h=document.createElement("br"),e,i,o,r,s,u;return n.appendChild(h),e=document.createElement("span"),e.className="metadata_sublabel2",e.innerHTML="Start Year:",n.appendChild(e),i=document.createElement("input"),i.name=t+"_startnew"+new_element_index,i.type="text",i.id=t+"_startnew"+new_element_index,i.className=f+"_year_input sbk_Focusable",n.appendChild(i),o=document.createElement("span"),o.className="metadata_sublabel",o.innerHTML="End Year:",n.appendChild(o),r=document.createElement("input"),r.name=t+"_endnew"+new_element_index,r.type="text",r.id=t+"_endnew"+new_element_index,r.className=f+"_year_input sbk_Focusable",n.appendChild(r),s=document.createElement("span"),s.className="metadata_sublabel",s.innerHTML="Period:",n.appendChild(s),u=document.createElement("input"),u.name=t+"_periodnew"+new_element_index,u.type="text",u.id=t+"_endperiod"+new_element_index,u.className=f+"_period_input sbk_Focusable",n.appendChild(u),new_element_index++,!1}function ir_type_change(){var f=document.getElementById("irtype"),o=f.value,c=document.getElementById("larger_body_label"),n="Larger Body of Work:",e,u,t,r,s,h;switch(o){case"Book Chapter":n="Book Title:";break;case"Conference Papers":case"Conference Proceedings":n="Conference Name:";break;case"Course Material":n="Course Name:";break;case"Journal Article":n="Journal Citation:";break;case"Technical Reports":n="Series Title:";break;case"Other":n="Larger Body of Work:"}for(c.innerHTML=n,e=-1,i=0;i<f.options.length;i++)f.options[i].value=="Select Material Type"&&(e=i);e>=0&&(f.options[e]=null);u=document.getElementById("ir_type_div");o=="Other"?document.getElementById("irtype_othertext")==null&&(t=document.createElement("span"),t.className="metadata_sublabel",t.innerHTML="Specify Type:",t.id="irtype_othertext",t.name="irtype_othertext",u.appendChild(t),r=document.createElement("input"),r.name="irtype_otherinput",r.type="text",r.id="irtype_otherinput",r.className="irtype_other_input sbk_Focusable",u.appendChild(r)):document.getElementById("irtype_othertext")!=null&&(s=document.getElementById("irtype_othertext"),h=document.getElementById("irtype_otherinput"),u.removeChild(s),u.removeChild(h))}function complexnote_type_change(n){var s="complex_note".replace("_",""),u=document.getElementById("complex_note_topdiv"+n),h=document.getElementById(s+"_type"+n),t=h.value,i,r,f,e,o;switch(t){case"500":case"511":case"362":case"585":case"546":case"561":case"524":case"581":case"518":document.getElementById("complexnote_input"+n)==null?(i=document.createElement("span"),i.className="metadata_sublabel",i.innerHTML="Materials Specified:",t=="362"&&(i.innerHTML="Source:"),(t=="500"||t=="511")&&(i.innerHTML="Display Label:"),i.id="complexnote_inputtext"+n,i.name="complexnote_inputtext"+n,u.appendChild(i),r=document.createElement("input"),r.name="complexnote_input"+n,r.type="text",r.id="complexnote_input"+n,r.className="complexnote_input sbk_Focusable",u.appendChild(r)):(f=document.getElementById("complexnote_inputtext"+n),f.innerHTML=t=="362"||t=="500"||t=="511"?t=="362"?"Source:":"Display Label:":"Materials Specified:");break;default:document.getElementById("complexnote_input"+n)!=null&&(e=document.getElementById("complexnote_inputtext"+n),o=document.getElementById("complexnote_input"+n),u.removeChild(e),u.removeChild(o))}}function add_complex_note(n,t){var a="complex_note".replace("_",""),h=document.getElementById("complex_note_div"),u="new"+abstract_new_index,l=document.createElement("br"),f,e,i,o,s,c,r;if(h.appendChild(l),f=document.createElement("div"),f.id="complex_note_topdiv"+u,h.appendChild(f),e=document.createElement("span"),e.innerHTML="Type:",e.className="metadata_sublabel2",f.appendChild(e),i=document.createElement("select"),i.className="complex_note_type",i.name="complexnote_type"+u,i.id="complexnote_type"+u,o=document.getElementById("complexnote_type1"),o!=null)for(s=0;s<o.length;s++)c=o[s].cloneNode(!0),i.appendChild(c);return i.onchange=function(){complexnote_type_change(u)},f.appendChild(i),r=document.createElement("textarea"),r.name="complexnote_textarea"+u,r.id="complexnote_textarea"+u,r.className="complex_note_input sbk_Focusable",r.setAttribute("rows",n),r.setAttribute("cols",t),h.appendChild(r),abstract_new_index++,!1}function add_complex_abstract(n,t){var y="complex_abstract".replace("_",""),l=document.getElementById("complex_abstract_div"),i="new"+abstract_new_index,v=document.createElement("br"),r,o,f,s,h,a,c,e,u;if(l.appendChild(v),r=document.createElement("div"),r.id="complex_abstract_topdiv"+i,l.appendChild(r),o=document.createElement("span"),o.innerHTML="Type:",o.className="metadata_sublabel2",r.appendChild(o),f=document.createElement("select"),f.className="complex_abstract_type",f.name="complexabstract_type"+i,f.id="complexabstract_type"+i,s=document.getElementById("complexabstract_type1"),s!=null)for(h=0;h<s.length;h++)a=s[h].cloneNode(!0),f.appendChild(a);return r.appendChild(f),c=document.createElement("span"),c.innerHTML="Language:",c.className="metadata_sublabel",r.appendChild(c),e=document.createElement("input"),e.name="complexabstract_language"+i,e.type="text",e.id="complexabstract_language"+i,e.className="complex_abstract_language sbk_Focusable",r.appendChild(e),u=document.createElement("textarea"),u.name="complexabstract_textarea"+i,u.id="complexabstract_textarea"+i,u.className="complex_abstract_input sbk_Focusable",u.setAttribute("rows",n),u.setAttribute("cols",t),l.appendChild(u),abstract_new_index++,!1}function viewer_type_changed(n){var i=document.getElementById(n),t=i.value,r=document.getElementById(n.replace("_type","_details"));r.style.display=t=="html"||t=="htmlmap"?"inline":"none"}function add_viewer_element(){var l=document.getElementById("viewer_div"),r="new"+new_element_index,n,e,i,s,u,h,t,o,c,f;if(l.appendChild(document.createElement("br")),n=document.createElement("select"),n.className="viewer_type",n.name="viewer_type"+r,n.id="viewer_type"+r,n.onchange=function(){viewer_type_changed(n.id)},l.appendChild(n),e=document.getElementById("viewer_type1"),e!=null)for(t=0;t<e.length;t++)o=e[t].cloneNode(!0),n.appendChild(o);if(i=document.createElement("span"),i.style.display="none",i.id="viewer_details"+r,l.appendChild(i),s=document.createElement("span"),s.innerHTML="File:",s.className="metadata_sublabel",i.appendChild(s),u=document.createElement("select"),u.className="viewer_file",u.name="viewer_file"+r,u.id="viewer_file"+r,i.appendChild(u),h=document.getElementById("viewer_file1"),h!=null)for(t=0;t<h.length;t++)o=h[t].cloneNode(!0),u.appendChild(o);return c=document.createElement("span"),c.innerHTML="Label:",c.className="metadata_sublabel",i.appendChild(c),f=document.createElement("input"),f.type="text",f.name="viewer_label"+r,f.id="viewer_label"+r,f.className="viewer_label_input sbk_Focusable",i.appendChild(f),new_element_index++,!1}function close_subject_form(n){var t,i,r,u,f,e,o,s,h,c,l,a,v;return diff=n.replace("form_subject_",""),t=document.getElementById("form_subject_term_"+diff),new_link_text="",i=document.getElementById("formsubjectoccup1_"+diff),i!=null&&trimString(i.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(i.value)),r=document.getElementById("formsubjecttopic1_"+diff),r!=null&&trimString(r.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(r.value)),u=document.getElementById("formsubjecttopic2_"+diff),u!=null&&trimString(u.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(u.value)),f=document.getElementById("formsubjecttopic3_"+diff),f!=null&&trimString(f.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(f.value)),e=document.getElementById("formsubjecttopic4_"+diff),e!=null&&trimString(e.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(e.value)),o=document.getElementById("formsubjectgenre1_"+diff),o!=null&&trimString(o.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(o.value)),s=document.getElementById("formsubjectgenre2_"+diff),s!=null&&trimString(s.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(s.value)),h=document.getElementById("formsubjectgeo1_"+diff),h!=null&&trimString(h.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(h.value)),c=document.getElementById("formsubjectgeo2_"+diff),c!=null&&trimString(c.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(c.value)),l=document.getElementById("formsubjecttemporal1_"+diff),l!=null&&trimString(l.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(l.value)),a=document.getElementById("formsubjecttemporal2_"+diff),a!=null&&trimString(a.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(a.value)),new_link_text.length>0?(new_link_text=new_link_text.substring(4),v=document.getElementById("formsubjectauthority_"+diff),v!=null&&trimString(v.value).length>0&&(new_link_text=new_link_text+" ( "+trimString(v.value)+" )"),t.className="form_linkline form_subject_line"):(new_link_text="<i>Empty Subject Keyword<\/i>",t.className="form_linkline_empty form_subject_line"),t.innerHTML=new_link_text,popdown(n),t.focus(),!1}function close_spatial_form(n){var t,i,r,u,f,e,o,s,h,c,l;return diff=n.replace("form_spatial_",""),t=document.getElementById("form_spatial_term_"+diff),new_link_text="",i=document.getElementById("formspatialcontinent_"+diff),i!=null&&trimString(i.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(i.value)),r=document.getElementById("formspatialcountry_"+diff),r!=null&&trimString(r.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(r.value)),u=document.getElementById("formspatialprovince_"+diff),u!=null&&trimString(u.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(u.value)),f=document.getElementById("formspatialregion_"+diff),f!=null&&trimString(f.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(f.value)),e=document.getElementById("formspatialstate_"+diff),e!=null&&trimString(e.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(e.value)),o=document.getElementById("formspatialterritory_"+diff),o!=null&&trimString(o.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(o.value)),s=document.getElementById("formspatialcounty_"+diff),s!=null&&trimString(s.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(s.value)),h=document.getElementById("formspatialcity_"+diff),h!=null&&trimString(h.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(h.value)),c=document.getElementById("formspatialisland_"+diff),c!=null&&trimString(c.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(c.value)),l=document.getElementById("formspatialarea_"+diff),l!=null&&trimString(l.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(l.value)),new_link_text.length>0?(new_link_text=new_link_text.substring(4),t.className="form_linkline form_spatial_line"):(new_link_text="<i>Empty Spatial Coverage<\/i>",t.className="form_linkline_empty form_spatial_line"),t.innerHTML=new_link_text,popdown(n),t.focus(),!1}function close_zootaxon_form(n){var t,i,r,u,f,e,o,s,h;return diff=n.replace("form_zootaxon_",""),t=document.getElementById("form_zootaxon_term_"+diff),new_link_text="",i=document.getElementById("formzootaxonkingdom_"+diff),i!=null&&trimString(i.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(i.value)),r=document.getElementById("formzootaxonphylum_"+diff),r!=null&&trimString(r.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(r.value)),u=document.getElementById("formzootaxonclass_"+diff),u!=null&&trimString(u.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(u.value)),f=document.getElementById("formzootaxonorder_"+diff),f!=null&&trimString(f.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(f.value)),e=document.getElementById("formzootaxonfamily_"+diff),e!=null&&trimString(e.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(e.value)),o=document.getElementById("formzootaxongenus_"+diff),o!=null&&trimString(o.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(o.value)),s=document.getElementById("formzootaxonspecies_"+diff),s!=null&&trimString(s.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(s.value)),h=document.getElementById("formzootaxoncommon_"+diff),h!=null&&trimString(h.value).length>0&&(new_link_text=new_link_text+" -- "+trimString(h.value)),new_link_text.length>0?(new_link_text=new_link_text.substring(4),t.className="form_linkline form_zootaxon_line"):(new_link_text="<i>No taxonomic information<\/i>",t.className="form_linkline_empty form_taxon_line"),t.innerHTML=new_link_text,popdown(n),t.focus(),!1}function close_maintitle_form(n){var t=document.getElementById("form_maintitle_term"),i,r,u;return new_link_text="",i=document.getElementById("formmaintitlenonsort"),i!=null&&trimString(i.value).length>0&&(new_link_text=new_link_text+i.value),r=document.getElementById("formmaintitletitle"),r!=null&&trimString(r.value).length>0&&(new_link_text=new_link_text+trimString(r.value)),u=document.getElementById("formmaintitlesubtitle"),u!=null&&trimString(u.value).length>0&&(new_link_text=new_link_text+" : "+trimString(u.value)),new_link_text.length==0?(new_link_text="<i>Empty Main Title<\/i>",t.className="form_linkline_empty form_title_main_line"):t.className="form_linkline form_title_main_line",t.innerHTML=new_link_text,popdown(n),t.focus(),!1}function close_othertitle_form(n){var t,i,r,u,f;if(diff=n.replace("form_othertitle_",""),t=document.getElementById("form_othertitle_line_"+diff),new_link_text="",i=document.getElementById("formothertitlenonsort_"+diff),i!=null&&trimString(i.value).length>0&&(new_link_text=new_link_text+i.value),r=document.getElementById("formothertitletitle_"+diff),r!=null&&trimString(r.value).length>0&&(new_link_text=new_link_text+trimString(r.value)),new_link_text.length>0){u=document.getElementById("formothertitlesubtitle_"+diff);u!=null&&trimString(u.value).length>0&&(new_link_text=new_link_text+" : "+trimString(u.value));f=document.getElementById("formothertitletype_"+diff);switch(f.value){case"abbreviated":new_link_text=new_link_text+" ( <i>Abbreviated Title<\/i> )";break;case"uniform":new_link_text=new_link_text+" ( <i>Uniform Title<\/i> )";break;case"series":new_link_text=new_link_text+" ( <i>Series Title<\/i> )";break;case"translated":new_link_text=new_link_text+" ( <i>Translated Title<\/i> )";break;default:new_link_text=new_link_text+" ( <i>Alternative Title<\/i> )"}t.className="form_linkline form_title_main_line"}else new_link_text="<i>Empty Other Title<\/i>",t.className="form_linkline_empty form_title_main_line";return t.innerHTML=new_link_text,popdown(n),t.focus(),!1}function other_title_type_change(n){var r=document.getElementById("formothertitletype_"+n),i=document.getElementById("formothertitlesubtype_"+n),t=document.getElementById("formothertitledisplay_"+n),u=r.value;switch(u){case"alternate":select_box_clear_options(t);select_box_add_option(t,"Added title page title","added");select_box_add_option(t,"Alternate title","alternate");select_box_add_option(t,"Caption title","caption");select_box_add_option(t,"Cover title","cover");select_box_add_option(t,"Distinctive title","distinctive");select_box_add_option(t,"Other title","other");select_box_add_option(t,"Portion of title","portion");select_box_add_option(t,"Parallel title","parallel");select_box_add_option(t,"Running title","running");select_box_add_option(t,"Spine title","spine");i.style.display="inline";break;case"uniform":select_box_clear_options(t);select_box_add_option(t,"Uniform Title","uniform");select_box_add_option(t,"Main Entry","main");select_box_add_option(t,"Uncontrolled Added Entry","uncontrolled");i.style.display="inline";break;default:i.style.display="none"}}function select_box_clear_options(n){for(var i=n.getElementsByTagName("option"),t=i.length-1;t>=0;t--)n.removeChild(i[t])}function select_box_add_option(n,t,i){var r=document.createElement("OPTION");r.text=t;r.value=i;n.options.add(r)}function close_ead_form(){var n=document.getElementById("form_ead_term"),t,i;return new_link_text="",t=document.getElementById("formead_url"),t!=null&&trimString(t.value).length>0&&(new_link_text=trimString(t.value)),i=document.getElementById("formead_name"),i!=null&&trimString(i.value).length>0&&(new_link_text=trimString(i.value)),new_link_text.length==0?(new_link_text="<i>Empty Related EAD <\/i>",n.className="form_linkline_empty form_ead_line"):n.className="form_linkline form_ead_line",n.innerHTML=new_link_text,popdown("form_ead"),n.focus(),!1}function close_related_url_form(){var n=document.getElementById("form_related_url_term"),t,i;return new_link_text="",t=document.getElementById("form_relatedurl_url"),t!=null&&trimString(t.value).length>0&&(new_link_text=trimString(t.value),i=document.getElementById("form_relatedurl_label"),i!=null&&trimString(i.value).length>0&&(new_link_text=new_link_text+" ( <i>"+trimString(i.value)+"<\/i> )")),new_link_text.length==0?(new_link_text="<i>Empty Related URL <\/i>",n.className="form_linkline_empty form_related_url_line"):n.className="form_linkline form_related_url_line",n.innerHTML=new_link_text,popdown("form_related_url"),n.focus(),!1}function close_typeformat_form(){var n=document.getElementById("form_typeformat_term"),t,i,r;return new_link_text="",t=document.getElementById("form_typeformat_extent"),t!=null&&trimString(t.value).length>0&&(new_link_text=trimString(t.value)+" -- "),i=document.getElementById("form_typeformat_placecode"),i!=null&&trimString(i.value).length>0&&(new_link_text=new_link_text+trimString(i.value)+" -- "),r=document.getElementById("form_typeformat_langcode"),r!=null&&trimString(r.value).length>0&&(new_link_text=new_link_text+trimString(r.value)+" -- "),new_link_text.length<4?(new_link_text="<i>no additional type information<i>",n.className="form_linkline_empty form_typeformat_line"):(new_link_text=new_link_text.substring(0,new_link_text.length-4),n.className="form_linkline form_typeformat_line"),n.innerHTML=new_link_text,popdown("form_typeformat"),n.focus(),!1}function close_related_item_form(n){var t,i,r,u;if(diff=n.replace("form_related_item_",""),t=document.getElementById("form_related_item_term_"+diff),new_link_text="",i=document.getElementById("form_relateditem_title_"+diff),i!=null&&trimString(i.value).length>0){if(r=document.getElementById("form_relateditem_display_"+diff),r!=null&&trimString(r.value).length>0)new_link_text="( <i>"+r.value+"<\/i> ) ";else if(u=document.getElementById("form_relateditem_relation_"+diff),u!=null&&trimString(u.value).length>0)switch(u.value){case"host":new_link_text="( <i>Host<\/i> ) ";break;case"other_format":new_link_text="( <i>Other Format<\/i> ) ";break;case"other_version":new_link_text="( <i>Other Version<\/i> ) ";break;case"preceding":new_link_text="( <i>Preceding<\/i> ) ";break;case"succeeding":new_link_text="( <i>Succeeding<\/i> ) "}new_link_text=new_link_text+i.value;t.className="form_linkline form_related_item_line"}else new_link_text="<i>Empty Related Item<\/i>",t.className="form_linkline_empty form_related_item_line";return t.innerHTML=new_link_text,popdown(n),t.focus(),!1}function close_serial_hierarchy(){var u=document.getElementById("form_serial_hierarchy_term"),f,e,a,n,o,t,s,h,v,i,c,r,l;return new_link_text="",f=document.getElementById("form_serialhierarchy_primary"),f!=null&&trimString(f.value).length>0&&(serial_type="enum",f.checked||(serial_type="chrono"),serial_type=="enum"?(e=document.getElementById("form_serialhierarchy_enum1text"),a=document.getElementById("form_serialhierarchy_enum1order"),e!=null&&a!=null&&trimString(e.value).length>0&&(new_link_text=trimString(e.value)+" ("+trimString(a.value)+")"),n=document.getElementById("form_serialhierarchy_enum2text"),o=document.getElementById("form_serialhierarchy_enum2order"),n!=null&&o!=null&&trimString(n.value).length>0&&(new_link_text=new_link_text.length>0?new_link_text+" -- "+n.value+" ("+trimString(o.value)+")":trimString(n.value)+" ("+trimString(o.value)+")"),t=document.getElementById("form_serialhierarchy_enum3text"),s=document.getElementById("form_serialhierarchy_enum3order"),t!=null&&s!=null&&trimString(t.value).length>0&&(new_link_text=new_link_text.length>0?new_link_text+" -- "+t.value+" ("+trimString(s.value)+")":trimString(t.value)+" ("+trimString(s.value)+")")):(h=document.getElementById("form_serialhierarchy_chrono1text"),v=document.getElementById("form_serialhierarchy_chrono1order"),h!=null&&v!=null&&trimString(h.value).length>0&&(new_link_text=trimString(h.value)+" ("+trimString(v.value)+")"),i=document.getElementById("form_serialhierarchy_chrono2text"),c=document.getElementById("form_serialhierarchy_chrono2order"),i!=null&&c!=null&&trimString(i.value).length>0&&(new_link_text=new_link_text.length>0?new_link_text+" -- "+i.value+" ("+trimString(c.value)+")":trimString(i.value)+" ("+trimString(c.value)+")"),r=document.getElementById("form_serialhierarchy_chrono3text"),l=document.getElementById("form_serialhierarchy_chrono3order"),r!=null&&l!=null&&trimString(r.value).length>0&&(new_link_text=new_link_text.length>0?new_link_text+" -- "+r.value+" ("+trimString(l.value)+")":trimString(r.value)+" ("+trimString(l.value)+")"))),new_link_text.length==0?(new_link_text="<i>Empty Serial Hierarchy <\/i>",u.className="form_linkline_empty form_serial_hierarchy_line"):u.className="form_linkline form_serial_hierarchy_line",u.innerHTML=new_link_text,popdown("form_serial_hierarchy"),u.focus(),!1}function name_type_changed(n){var t=document.getElementById("form_name_type_"+n);if(t!=null){var i=document.getElementById("name_desc_location_span_"+n),r=document.getElementById("name_personallabel1_"+n),u=document.getElementById("name_personallabel2_"+n),f=document.getElementById("name_personallabel3_"+n),e=document.getElementById("name_personallabel4_"+n),o=document.getElementById("form_name_given_"+n),s=document.getElementById("form_name_family_"+n),h=document.getElementById("form_name_display_"+n),c=document.getElementById("form_name_terms_"+n),l=document.getElementById("form_name_"+n);t.value=="personal"?(i.innerHTML="Description",r.style.display="inline",u.style.display="inline",f.style.display="inline",e.style.display="inline",o.style.display="inline",s.style.display="inline",h.style.display="inline",c.style.display="inline",l.className="name_popup_div_personal sbkMetadata_PopupDiv"):(i.innerHTML="Location",r.style.display="none",u.style.display="none",f.style.display="none",e.style.display="none",o.style.display="none",s.style.display="none",h.style.display="none",c.style.display="none",l.className="name_popup_div sbkMetadata_PopupDiv")}}function close_name_form(n){var t,u,f,e,o,s,h,c,i,r;return diff=n.replace("form_name_",""),t=document.getElementById("form_name_line_"+diff),new_link_text="",full_name="",given_name="",family_name="",type="personal",u=document.getElementById("form_name_type_"+diff),u!=null&&trimString(u.value).length>0&&(type=u.value),f=document.getElementById("form_name_full_"+diff),f!=null&&trimString(f.value).length>0&&(full_name=f.value),type=="personal"&&full_name.length==0?(e=document.getElementById("form_name_given_"+diff),e!=null&&trimString(e.value).length>0&&(given_name=trimString(e.value)),o=document.getElementById("form_name_family_"+diff),o!=null&&trimString(o.value).length>0&&(family_name=trimString(o.value)),new_link_text=given_name.length>0?family_name.length>0?family_name+", "+given_name:given_name:family_name,s=document.getElementById("form_name_display_"+diff),s!=null&&trimString(s.value).length>0&&(new_link_text=new_link_text+" ( "+trimString(s.value)+" )"),h=document.getElementById("form_name_dates_"+diff),h!=null&&trimString(h.value).length>0&&(new_link_text=new_link_text+", "+trimString(h.value))):new_link_text=full_name,new_link_text.length>0?(roles="",c=document.getElementById("form_name_role1_"+diff),c!=null&&trimString(c.value).length>0&&(roles=trimString(c.value)),i=document.getElementById("form_name_role2_"+diff),i!=null&&trimString(i.value).length>0&&(roles=roles.length>0?roles+", "+trimString(i.value):trimString(i.value)),r=document.getElementById("form_name_role3_"+diff),r!=null&&trimString(r.value).length>0&&(roles=roles.length>0?roles+", "+trimString(r.value):trimString(r.value)),roles.length>0&&(new_link_text=new_link_text+" ( <i>"+roles+"<\/i> )"),t.className="form_linkline form_name_line"):(new_link_text="<i>Empty Name<\/i>",t.className="form_linkline_empty form_name_line"),t.innerHTML=new_link_text,popdown(n),t.focus(),!1}function set_uf_rights(n,t){var r=document.getElementById(n),i;return r.value=t,i=document.getElementById("uf_rights"),i!=null&&toggle("uf_rights"),!1}function set_cc_rights(n,t){var r=document.getElementById(n),i;return r.value=t,i=document.getElementById("cc_rights"),i!=null&&toggle("cc_rights"),!1}function open_cc_rights(){var n=document.getElementById("uf_rights");return n.style.display="none",toggle("cc_rights"),!1}function open_uf_rights(){var n=document.getElementById("cc_rights");return n.style.display="none",toggle("uf_rights"),!1}function link_focused2(n){var t=document.getElementById(n);t.className.indexOf("_focused")<0&&(t.className=t.className.replace("form_linkline_empty ","form_linkline_empty_focused ").replace("form_linkline ","form_linkline_focused "))}function link_blurred2(n){var t=document.getElementById(n);t.className.indexOf("_focused")>0&&(t.className=t.className.replace("_focused",""))}function link_focused(n){var t=document.getElementById(n);t.className.indexOf("_focused")<0&&(t.className=t.className+"_focused")}function link_blurred(n){var t=document.getElementById(n);t.className.indexOf("_focused")>0&&(t.className=t.className.replace("_focused",""))}function new_creator_link_clicked(){var n=document.getElementById("new_element_requested");return n.value="name",document.itemNavForm.submit(),!1}function new_title_link_clicked(){var n=document.getElementById("new_element_requested");return n.value="title",document.itemNavForm.submit(),!1}function new_subject_link_clicked(){var n=document.getElementById("new_element_requested");return n.value="subject",document.itemNavForm.submit(),!1}function new_spatial_link_clicked(){var n=document.getElementById("new_element_requested");return n.value="spatial",document.itemNavForm.submit(),!1}function new_relateditem_link_clicked(){var n=document.getElementById("new_element_requested");return n.value="relateditem",document.itemNavForm.submit(),!1}function editmetadata_cancel_form(){var n=document.getElementById("new_element_requested");return n.value="cancel",document.itemNavForm.submit(),!1}function editmetadata_save_form(){var n=document.getElementById("new_element_requested");return n.value="save",document.itemNavForm.submit(),!1}function editmetadata_newpage(n){var t=document.getElementById("new_element_requested");return t.value="newpage"+n,document.itemNavForm.submit(),!1}function editmetadata_complicate(){var n=document.getElementById("new_element_requested");return n.value="complicate",document.itemNavForm.submit(),!1}function editmetadata_simplify(){var n=document.getElementById("new_element_requested");return n.value="simplify",document.itemNavForm.submit(),!1}function trimString(n){return n=this!=window?this:n,n.replace(/^\s+/g,"").replace(/\s+$/g,"")}function upload_label_fieldChanged(n,t){var o=document.getElementById(n).value,et=!isNaN(parseFloat(o))&&isFinite(o),it,l,rt,c,y,f,w,d,b,e,ft,v,r,i;et&&(document.getElementById(n).value="Page "+o,o=document.getElementById(n).value);var g=n.replace("upload_label",""),s=o.split(" ")[o.split(" ").length-1],k=s.match(/\d+/g),nt=!0,tt=!0;for(i=0;i<s.length;i++)y=s.charAt(i),"IVXLCDM".indexOf(y)==-1&&"ivxlcdm".indexOf(y)==-1&&(nt=!1);if(k!=null){if(k[0].length==s.length)for(it=o.substr(0,o.length-k[0].length),l=parseInt(s),r=parseInt(g)+1;r<=t;r++)if(document.getElementById("upload_label"+r))l++,rt=document.getElementById("upload_label"+r),rt.value=it+l;else continue}else if(nt==!0){for(c="No error",i=0;i<s.length;i++)y=s.charAt(i),tt="IVXLCDM".indexOf(y)>-1?!1:!0;for(f=s.toUpperCase().trim(),(f.split("V").length>2||f.split("L").length>2||f.split("D").length>2)&&(c="Repeated use of V,L or D"),w=1,d="Z",i=0;i<f.length;i++)f.charAt(i)==d?(w++,w==4&&(c="Single letter repeated more than thrice")):(w=1,d=f.charAt(i));for(var a=0,h=[],ut=1e3,u=0,e=0;a<f.length;){b=f.charAt(a);switch(b){case"I":u=1;break;case"V":u=5;break;case"X":u=10;break;case"L":u=50;break;case"C":u=100;break;case"D":u=500;break;case"M":u=1e3}if(u>ut&&(c="Smaller value incorrectly placed to the left of a larger value numeral"),e=0,a<f.length-1){ft=f.charAt(a+1);switch(ft){case"I":e=1;break;case"V":e=5;break;case"X":e=10;break;case"L":e=50;break;case"C":e=100;break;case"D":e=500;break;case"M":e=1e3}e>u&&(("IXC".indexOf(b)==-1||e>u*10||f.split(b).length>3)&&(c="Rule of subtractive combination violated"),ut=u-1,u=e-u,a++)}h.push(u);a++}for(r=0;r<h.length-1;r++)h[r]<h[r+1]&&(c="Larger valued numeral(pair) found to the right of a smaller value");for(v=0,r=0;r<h.length;r++)v=v+h[r];if(typeof v=="number"&&c=="No error")for(s==document.getElementById(n).value&&(document.getElementById(n).value="Page "+o,o=document.getElementById(n).value),r=parseInt(g)+1;r<=t;r++)if(document.getElementById("upload_label"+r)){v++;var l=v,h=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],ot=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],p="";for(i=0;i<13;i++)while(l>=h[i])l=l-h[i],p=p+ot[i];tt&&(p=p.toLowerCase());document.getElementById("upload_label"+r).value=document.getElementById(n).value.substr(0,document.getElementById(n).value.length-s.length-1)+" "+p}}}var item_count_hash=new MyHash,other_title_new_index=1,new_element_index=1,abstract_new_index=1,note_new_index=1,new_language_count=0,new_audience_count=0